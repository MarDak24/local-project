<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Bookshelt</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,wght@0,400;0,500;0,700;1,400&display=swap"
    rel="stylesheet" />
  <link rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/modern-normalize/1.1.0/modern-normalize.min.css" />
  <link rel="stylesheet" href="./css/styles.css" />
  <link rel="stylesheet" title="theme" href="./css/light.css">
</head>

<body>
  <!-- Іван - Header -->
  <load="partials/header.html" />

  <!-- Тимур - Categories -->
  <load="partials/categories.html" />

  <!-- Анастасія - Scrum master,  Support Ukraine -->
  <load="partials/supportUkraine.html" />

  <!-- Марина, Наталія - Best sellers and other lists -->
  <load="partials/bestSellersOtherList.html" />

  <!-- Віталій - Pop up(modal при натисканні на 1 книгу) -->
  <load="partials/popUp.html" />

  <!-- Костя - All backend requests -->
  <load="partials/allBackendRequests.html" />

  <!-- Максим - Dark mode -->
  <load="partials/darkMode.html" />

  <!-- Роман - Shopping list -->
  <a href="./shoppinglist.html">link to Shopping Page</a>
  <!-- <load="Shopping/shoppingList.html" /> -->
  <script type="module" src="./main.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const themeSwitcher = document.querySelector('.switcher');

      themeSwitcher.addEventListener('click', function () {
        toggleTheme();
      });

      function toggleTheme() {
        const isDarkMode = themeSwitcher.classList.toggle('dark-theme');
        const themeName = isDarkMode ? 'dark' : 'light';
        applyTheme(themeName);
        saveTheme(themeName);
      }

      function applyTheme(themeName) {
        const themeStylesheet = document.querySelector('[title="theme"]');
        themeStylesheet.setAttribute('href', `./css/${themeName}.css`);
      }

      function saveTheme(themeName) {
        localStorage.setItem('theme', themeName);
      }

      const activeTheme = localStorage.getItem('theme');
      if (activeTheme) {
        themeSwitcher.classList.add(activeTheme);
        applyTheme(activeTheme);
      }
    });
  </script>
</body>

</html>